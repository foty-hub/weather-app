{"version":3,"sources":["logo.svg","components/DailyRow.js","components/CurrentDisplay.js","App.js","reportWebVitals.js","index.js"],"names":["DailyRow","props","className","time","desc","max","min","CurrentDisplay","isNaN","temp","onSubmit","type","autoComplete","placeholder","onChange","width","height","viewBox","fill","xmlns","fillRule","clipRule","d","location","App","locationSearch","localStorage","getItem","console","log","useState","currentInfo","setCurrent","currentDesc","setDesc","dailyTime","setDailyTime","dailyDesc","setDailyDesc","dailyMax","setDailyMax","dailyMin","setDailyMin","inputValue","setInputValue","searchValue","setSearchValue","locationDisplay","setLocationDisplay","useEffect","makeRequests","dateString","dt","dateTime","Date","dayIndex","getDay","dateVal","nth","getDate","month","getMonth","fetchWeather","lat","lng","a","weatherReq","fetch","weatherResponse","json","data","current","weather","description","daily","map","x","Math","round","locationString","locReq","locResponse","locData","status","results","geometry","formatted_address","setItem","alert","event","preventDefault","target","value","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.3beb29a0.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","import React from 'react';\r\n\r\nconst DailyRow = (props) => (\r\n  <div className=\"forecast-row\">\r\n    <p className=\"date\">{props.time}</p>\r\n    <p className=\"desc\">{props.desc}</p>\r\n    <p className=\"morn-temp\">{props.max}&#8451;</p>\r\n    <p className=\"even-temp\">{props.min}&#8451;</p>\r\n  </div>\r\n);\r\n\r\nexport default DailyRow","import React from 'react';\r\n\r\nconst CurrentDisplay = (props) => (\r\n    <div className=\"current-display\">\r\n        <h1 className=\"temp-today\">{!isNaN(props.temp) ? props.temp : \"loading...\"}&#8451;</h1>\r\n        <p className=\"desc-today\">{props.desc}</p>\r\n        <form onSubmit = {props.onSubmit}>\r\n            <input type=\"text\" autoComplete=\"off\" className=\"search-bar\" placeholder=\"eg... London, UK\" onChange = {props.onChange}/>\r\n        </form>\r\n        <div className=\"location\">\r\n            <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                <path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M19.4751 9.98256C19.4751 14.1151 12.4585 21.67 11.9926 21.9632C11.5267 22.2564 4.51001 14.1151 4.51001 9.98256C4.51001 5.85006 7.86007 2.5 11.9926 2.5C16.1251 2.5 19.4751 5.85006 19.4751 9.98256ZM14.4868 9.98256C14.4868 11.3601 13.3701 12.4767 11.9926 12.4767C10.6151 12.4767 9.49838 11.3601 9.49838 9.98256C9.49838 8.60506 10.6151 7.48837 11.9926 7.48837C13.3701 7.48837 14.4868 8.60506 14.4868 9.98256Z\" fill=\"white\"/>\r\n                </svg>\r\n            <p className=\"city\">{props.location}</p>\r\n        </div>\r\n    </div>\r\n);\r\n\r\nexport default CurrentDisplay","import logo from './logo.svg';\r\nimport React, {useEffect, useState} from \"react\";\r\nimport './App.css';\r\nimport DailyRow from \"./components/DailyRow\";\r\nimport CurrentDisplay from './components/CurrentDisplay';\r\n\r\nconst App = () => {\r\n\r\n  // positive coords are N/E, negative are S/W\r\n  const long = '51.5074';\r\n  const lat = '-0.1278';\r\n  let locationSearch = \"\";\r\n  if (localStorage.getItem(\"Location\")){\r\n   locationSearch = localStorage.getItem(\"Location\");\r\n   console.log(\"init value \" + locationSearch);\r\n  }\r\n  else {\r\n    locationSearch = \"london, uk\"; // default fallback value if nothing is locally stored\r\n  }\r\n  \r\n  const [currentInfo, setCurrent] = useState([]);\r\n  const [currentDesc, setDesc] = useState([]);\r\n  const [dailyTime, setDailyTime] = useState([]);\r\n  const [dailyDesc, setDailyDesc] = useState([]); \r\n  const [dailyMax, setDailyMax] = useState([]);\r\n  const [dailyMin, setDailyMin] = useState([]);\r\n  const [inputValue, setInputValue] = useState();\r\n  const [searchValue, setSearchValue] = useState(locationSearch);\r\n  const [locationDisplay, setLocationDisplay] = useState();\r\n\r\n  // Triggered on page load, will be set up to refresh when new location is added\r\n  useEffect(() => {\r\n    makeRequests(searchValue);\r\n  }, [searchValue]);\r\n\r\n  // Handles text submission and triggers useEffect, making the API calls\r\n  const handleSubmit = (event) => {\r\n    event.preventDefault();\r\n    setSearchValue(inputValue);\r\n  };\r\n\r\n  // Handles text input to the main search bar\r\n  const handleChange = (event) => {\r\n    setInputValue(event.target.value);\r\n  }\r\n\r\n  // Returns the correct suffix for ordinal numbers (7th, 1st, 3rd)\r\n  const nth = (d) => {\r\n    if (d > 3 && d < 21){return d+'th'};\r\n    switch (d % 10){\r\n      case 1: return d+'st';\r\n      case 2: return d+'nd';\r\n      case 3: return d+'rd';\r\n      default: return d+'th';\r\n    };\r\n  };\r\n\r\n  // Converts javascript date strings to a more readable format\r\n  const dateString = (dt) => {\r\n    const dayArray = ['Sun', 'Mon', 'Tues', 'Wed', 'Thurs', 'Fri', 'Sat'];\r\n    const monthArray = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'June', 'July', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']\r\n    // x1000 to convert form unix time to milliseconds\r\n    const dateTime = new Date(dt*1000);\r\n    const dayIndex = dateTime.getDay();\r\n    const dateVal = nth(dateTime.getDate());\r\n    const month = dateTime.getMonth();\r\n    return `${dayArray[dayIndex]} ${dateVal} ${monthArray[month]}`;\r\n  }\r\n\r\n  // Fetches and handles openweathermap API call, updating hooks\r\n  const fetchWeather = async (lat, lng) => {\r\n    const weatherReq = `https://api.openweathermap.org/data/2.5/onecall?lat=${lat}&lon=${lng}&units=metric&appid=a7ff38ee1c49b77064c72f94875dcc9e`;\r\n    const weatherResponse = await fetch(weatherReq);\r\n    const data = await weatherResponse.json();\r\n    setCurrent(data.current);\r\n    setDesc(data.current.weather[0].description);\r\n    setDailyTime( data.daily.map(x => dateString(x.dt)) );        // messy fix to prevent React throwing object assignment errors\r\n    setDailyDesc( data.daily.map(x => x.weather[0].description) );\r\n    setDailyMax( data.daily.map(x => Math.round(x.temp.max)) );\r\n    setDailyMin( data.daily.map(x => Math.round(x.temp.min)) );\r\n    console.log(data);\r\n  };\r\n\r\n  // Fetches and handles the GMaps API call, and calls fetchWeather upon successful return\r\n  const makeRequests = async (locationString) => {\r\n    const locReq = `https://maps.googleapis.com/maps/api/geocode/json?address=${locationString}&key=AIzaSyCMCT2J6HObmXkBZiD-gMAdmucOoTXEn_U`;\r\n    const locResponse = await fetch(locReq);\r\n    const locData = await locResponse.json();\r\n    let lat = \"\";\r\n    let lng = \"\";\r\n\r\n    switch(locData.status){\r\n      case \"OK\":\r\n        lat = locData.results[0].geometry.location.lat;\r\n        lng = locData.results[0].geometry.location.lng;\r\n        setLocationDisplay(locData.results[0].formatted_address);\r\n        localStorage.setItem(\"Location\", searchValue);\r\n        fetchWeather(lat, lng);\r\n        break;\r\n      case \"ZERO_RESULTS\":\r\n        alert(\"No matching address found\");\r\n        break;\r\n      case \"INVALID_REQUEST\":\r\n        alert(\"Invalid request\");\r\n        break;\r\n      case \"OVER_DAILY_LIMIT\":\r\n      case \"OVER_QUERY_LIMIT\":\r\n      case \"REQUEST_DENIED\":\r\n      case \"INVALID_REQUEST\":\r\n        alert(\"API request failed\");\r\n        break;\r\n      default:\r\n        alert(\"Unknown error occurred\");\r\n    }\r\n  };\r\n\r\n  return(\r\n    <div className=\"container\">\r\n        <CurrentDisplay temp = {Math.round(currentInfo.temp)} desc = {currentDesc} onSubmit = {handleSubmit} onChange = {handleChange} location = {locationDisplay}/>\r\n      <p className=\"subtitle\">next 7 days</p>\r\n      <div className=\"forecast\">\r\n        <DailyRow time = {dailyTime[1]} desc = {dailyDesc[1]} max = {dailyMax[1]} min = {dailyMin[1]}/>\r\n        <DailyRow time = {dailyTime[2]} desc = {dailyDesc[2]} max = {dailyMax[2]} min = {dailyMin[2]}/>\r\n        <DailyRow time = {dailyTime[3]} desc = {dailyDesc[3]} max = {dailyMax[3]} min = {dailyMin[3]}/>\r\n        <DailyRow time = {dailyTime[4]} desc = {dailyDesc[4]} max = {dailyMax[4]} min = {dailyMin[4]}/>\r\n        <DailyRow time = {dailyTime[5]} desc = {dailyDesc[5]} max = {dailyMax[5]} min = {dailyMin[5]}/>\r\n        <DailyRow time = {dailyTime[6]} desc = {dailyDesc[6]} max = {dailyMax[6]} min = {dailyMin[6]}/>\r\n        <DailyRow time = {dailyTime[7]} desc = {dailyDesc[7]} max = {dailyMax[7]} min = {dailyMin[7]}/>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}